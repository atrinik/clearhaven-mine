# *****************************************************************************
# Configuration part. Edit those variables to fit your own system setup.
# *****************************************************************************

# Default libraries required. Edit those to match $(blddir)/Modules/Makefile
# if needed.
LIBS		= -lnsl -ldl -lpthread -lutil

EXTRA_CFLAGS    =

# *****************************************************************************
# End of user configuration part. Don't change anything after this line,
# unless things really go wrong with the default setup.
# *****************************************************************************

RM        = @RM@
CC        = @CC@

SRCS = \
	plugin_arena.c

OBJECTS   = $(SRCS:.c=.o)
INCLUDE   = -I./include -I../../include -I../common/include

CFLAGS    = -g -O3 -fPIC $(EXTRA_CFLAGS)
DEPEND = @DEPEND@

LDFLAGS=	-export-dynamic -rdynamic -Xlinker -Bsymbolic
SYSLIBS=	-lm
ALLLIBS=	$(LIBS) $(SYSLIBS)

all : plugin_arena.so.0.1 doc

clean :
	$(RM) -f *.o core plugin_arena.so.0.1

distclean : clean
	$(RM) -f *.o core plugin_arena.so.0.1 Makefile

plugin_arena.so.0.1 : $(OBJECTS)
	$(CC) $(CFLAGS) $(LDFLAGS) -shared -Wl,-soname,plugin_arena.so.0 $(LDFLAGS) $(OBJECTS) ../../common/libcross.a ../common/plugin_common.a $(ALLLIBS) -o plugin_arena.so.0.1

.c.o:
	$(CC) $(CFLAGS) $(INCLUDE) -c $< -o $@

doc:
#doc/Map_Methods.txt doc/Object_Methods.txt doc/DaimoninFunctions.txt
#doc/Map_Methods.txt: DaimoninMap.c
#	$(MAKEDOC) $< > $@

#doc/Object_Methods.txt: DaimoninObject.c
#	$(MAKEDOC) $< > $@

#doc/DaimoninFunctions.txt: plugin_python.c
#	$(MAKEDOC) $< > $@

depend:
	$(DEPEND) $(DEPENDFLAGS) -- $(CFLAGS) $(INCLUDE) --

proto:

# DO NOT DELETE THIS LINE -- make depend depends on it.
